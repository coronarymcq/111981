<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f6fa;
        margin: 0;
        padding: 0;
      }

      .navbar {
        background-color: #2f3640;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
      }

      .navbar .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .content {
        padding: 30px;
      }

      .card {
        background: white;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      .logout-button {
        background-color: #e84118;
        border: none;
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
      }

      .logout-button:hover {
        background-color: #c23616;
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <h2>üè† Dashboard</h2>
      <div class="user-info" id="user-info">
        <!-- Populated by JS -->
      </div>
    </div>

    <div class="content" id="dashboard-content">
      <!-- Populated by JS -->
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyB6e_H-E7l6_x9GbOeJONZ515lsclyoogw",
        authDomain: "coronary-64f63.firebaseapp.com",
        projectId: "coronary-64f63",
        storageBucket: "coronary-64f63.appspot.com",
        messagingSenderId: "110121771753",
        appId: "1:110121771753:web:bad6365385b0a38fa94678",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      const userInfoDiv = document.getElementById("user-info");
      const dashboardContent = document.getElementById("dashboard-content");

      onAuthStateChanged(auth, (user) => {
        if (user) {
          // ‚úÖ Show user info
          userInfoDiv.innerHTML = `
          <span>üë§ ${user.displayName || user.email}</span>
          <button class="logout-button" id="logoutBtn">Logout</button>
        `;

          // ‚úÖ Dashboard contents
          dashboardContent.innerHTML = `
          <div class="card">
            <h3>Welcome, ${user.displayName || user.email}</h3>
            <p>This is your personalized dashboard. Here you'll soon be able to manage your account, view saved questions, and track progress.</p>
          </div>

          <div class="card">
            <h4>üìö Saved Questions</h4>
            <p>Coming soon...</p>
          </div>

          <div class="card">
            <h4>üß† My Performance</h4>
            <p>Coming soon...</p>
          </div>
        `;

          document.getElementById("logoutBtn").addEventListener("click", () => {
            signOut(auth).then(() => {
              window.location.href = "index.html";
            });
          });
        } else {
          // ‚ùå If not logged in, redirect to login
          window.location.href = "cont/011215071914/login01.html";
        }
      });
    </script>
  </body>
</html>
